# 동작 데이터 분석기 v2.0 (Motion Analysis App v2.0)

개선된 동작 데이터 분석을 위한 GUI 애플리케이션입니다.

## 🚀 새로운 기능 (v2.0)

### ✨ 주요 개선사항
- **강화된 데이터 검증**: 자동 파일 인코딩 감지, 헤더 자동 감지
- **개선된 통계 계산**: 일관된 표준편차 계산, 이상값 처리 옵션
- **향상된 보행 분석**: 더 안전한 보행 주기 검출, 강화된 검증 로직
- **포괄적 에러 처리**: 상세한 오류 메시지, 복구 가능한 에러 처리
- **데이터 품질 평가**: 실시간 데이터 품질 모니터링

### 🔧 기술적 개선
- 모듈화된 아키텍처
- 타입 힌트 지원
- 설정 검증 시스템
- 메모리 효율성 향상
- 다국어 지원 확장

## 📁 프로젝트 구조

```
motion_analysis_app_v2/
├── main.py                    # 메인 실행 파일
├── requirements.txt           # 의존성 패키지 목록
├── README.md                  # 프로젝트 문서
├── config/                    # 설정 파일들
│   ├── __init__.py
│   ├── constants.py           # 상수 및 설정 정의
│   └── language.py            # 다국어 지원 (한국어/영어)
├── src/                       # 메인 소스 코드
│   ├── __init__.py
│   ├── motion_analysis_app.py # 메인 애플리케이션 클래스 (개발 중)
│   └── analysis_engine.py     # 개선된 분석 엔진
├── utils/                     # 유틸리티 함수들
│   ├── __init__.py
│   ├── data_validator.py      # 데이터 검증 클래스
│   ├── gait_analysis.py       # 강화된 보행 분석 함수
│   ├── math_utils.py          # 개선된 수학 계산 함수
│   └── plot_utils.py          # 향상된 그래프 관련 함수
└── tests/                     # 테스트 파일들 (향후 추가)
```

## 🛠️ 설치 및 실행

### 1. 시스템 요구사항
- Python 3.8 이상
- Windows 10/11, macOS 10.14+, 또는 Linux Ubuntu 18.04+
- 최소 4GB RAM 권장

### 2. 의존성 설치
```bash
# 기본 패키지 설치
pip install -r requirements.txt

# 또는 개별 설치
pip install pandas>=1.5.0 matplotlib>=3.6.0 numpy>=1.21.0
```

### 3. 프로그램 실행
```bash
python main.py
```

## 📊 주요 기능

### 데이터 처리
- **지원 파일 형식**: CSV, STO, TXT
- **자동 인코딩 감지**: UTF-8, EUC-KR, CP949 등
- **스마트 헤더 감지**: 자동으로 데이터 시작 행 감지
- **데이터 품질 검증**: 실시간 품질 평가 및 리포트

### 통계 분석
- **기본 통계**: 평균, 표준편차, 최댓값, 최솟값, 중앙값
- **고급 통계**: 백분위수, IQR, 변동계수
- **이상값 처리**: IQR 방법 또는 Z-score 방법
- **표본/모집단 선택**: ddof 파라미터 조정 가능

### 보행 분석
- **보행 주기 검출**: 개선된 heel-strike 감지
- **단계별 분석**: EarlyStance, LateStance, Liftoff, Swing, Landing
- **정규화 분석**: 0-100% 보행 주기 정규화
- **품질 검증**: 주기 길이 및 변동성 검증

### 시각화
- **비교 그래프**: 여러 파일 동시 비교
- **정규화 그래프**: 보행 주기별 평균 및 신뢰구간
- **통계 요약 플롯**: 히스토그램 및 통계 정보
- **고품질 저장**: PNG, PDF 등 다양한 형식

## ⚙️ 설정 옵션

### 데이터 검증 설정
```python
VALIDATION_CONFIG = {
    'min_data_points': 10,          # 최소 데이터 포인트
    'max_file_size_mb': 100,        # 최대 파일 크기
    'min_cycle_length': 10,         # 최소 보행 주기 길이
    'max_cycle_length': 1000,       # 최대 보행 주기 길이
    'outlier_detection_method': 'iqr'  # 이상값 검출 방법
}
```

### 통계 계산 설정
```python
STATISTICS_CONFIG = {
    'ddof': 0,                      # 자유도 (0=모집단, 1=표본)
    'remove_outliers': False,       # 이상값 제거 여부
    'confidence_level': 0.95        # 신뢰수준
}
```

## 🔍 사용 방법

### 1. 파일 로드
1. "파일 열기" 버튼 클릭
2. CSV/STO 파일 선택 (여러 파일 동시 선택 가능)
3. 자동으로 데이터 검증 및 변수 목록 표시

### 2. 변수 선택
1. 왼쪽 변수 목록에서 분석할 변수 선택
2. "→ 목록 추가" 버튼으로 선택 목록에 추가
3. 그래프 생성을 원하는 변수는 Graph 목록에도 추가

### 3. 분석 실행
1. "분석 실행" 버튼 클릭
2. 실시간 진행 상황 모니터링
3. 결과 확인 및 해석

### 4. 결과 저장
1. "결과 저장" 버튼으로 CSV 형태로 통계 결과 저장
2. "Graph 저장" 버튼으로 시각화 결과 저장

## 🚨 문제 해결

### 일반적인 문제들

**Q: 한글이 깨져서 표시됩니다**
A: 시스템에 한글 폰트가 설치되어 있는지 확인하세요. Windows의 경우 "맑은 고딕", macOS의 경우 "Apple Gothic" 폰트가 필요합니다.

**Q: 파일을 불러올 수 없습니다**
A: 파일 형식(CSV, STO)과 인코딩을 확인하세요. 프로그램이 자동으로 인코딩을 감지하지만, 특수한 경우 수동 변환이 필요할 수 있습니다.

**Q: 보행 주기를 찾을 수 없습니다**
A: leg.state 컬럼이 올바른 형식(0-4 값)인지 확인하세요. 또한 충분한 길이의 데이터가 있는지 확인하세요.

**Q: 메모리 부족 오류가 발생합니다**
A: 파일 크기를 줄이거나, 분석할 변수 수를 제한해 보세요. 100MB 이상의 파일은 처리하지 않는 것을 권장합니다.

### 로그 확인
프로그램 실행 시 콘솔에 표시되는 로그를 확인하여 문제점을 파악할 수 있습니다.

## 🔄 원본 버전과의 차이점

| 기능 | v1.0 | v2.0 |
|------|------|------|
| 데이터 검증 | 기본적 | 포괄적 |
| 통계 계산 | 단순 | 고급 옵션 |
| 에러 처리 | 제한적 | 강화됨 |
| 보행 분석 | 기본 | 강화된 검증 |
| 코드 구조 | 단일 파일 | 모듈화 |
| 성능 | 기본 | 최적화됨 |
| 메모리 효율성 | 보통 | 향상됨 |

## 🤝 기여하기

1. 이슈 리포트: 버그나 개선 사항을 이슈로 등록
2. 기능 제안: 새로운 기능에 대한 아이디어 제안
3. 코드 기여: Pull Request를 통한 코드 개선

## 📜 라이선스

이 프로젝트는 MIT 라이선스 하에 있습니다.

## 📞 지원

- 문제 발생 시: GitHub Issues 페이지 활용
- 문서 및 예제: Wiki 페이지 참조
- 업데이트 정보: Release 페이지 확인

---

**Motion Analysis App v2.0** - 더 정확하고 신뢰할 수 있는 동작 데이터 분석을 위해